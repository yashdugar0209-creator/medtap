cat > public/index.html << 'EOF'
<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>MedTap Dashboard</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
<div class="container">
  <div class="header">
      <div class="logo">MT</div>
      <div class="title">
        <h1>MedTap</h1>
        <p class="small">NFC Medical Card â€¢ Smart Health Dashboard</p>
      </div>

      <div class="toolbar">
        <input id="tokenInput" placeholder="Paste Token"/>
        <button class="btn" id="saveToken">Save</button>
        <button class="btn primary" id="createPatientBtn">New Patient</button>
      </div>
  </div>

  <div class="grid">
    <main>
      <div class="card">
        <strong>Quick Actions</strong>
        <div class="small">Search patient, NFC scan, view records</div>

        <div class="searchbar" style="margin-top:10px;">
          <input id="searchQuery" placeholder="Search name / email / phone">
          <button class="btn" id="searchBtn">Search</button>
          <button class="btn" id="nfcSim">Sim NFC</button>
        </div>

        <div id="results" class="list"></div>
      </div>

      <div style="height:20px"></div>

      <div class="card">
        <strong>Latest Records</strong>
        <div class="small">Recently added medical reports</div>

        <div id="records" class="list"></div>
      </div>
    </main>

    <aside>
      <div class="card">
        <strong>Active Patient</strong>
        <div id="activePatient" class="small" style="margin-top:10px;">None Selected</div>

        <hr style="margin-top:12px;margin-bottom:12px;border:1px solid rgba(255,255,255,0.05);"/>

        <button class="btn" onclick="window.location='admin.html'">Admin Panel</button>
        <button class="btn" onclick="window.location='hospital.html'">Hospital Intake</button>
      </div>
    </aside>
  </div>
</div>

<script>
// SIMPLE FRONTEND JS

const apiBase = window.location.origin + "/api";
const el = id => document.getElementById(id);
let token = localStorage.getItem("medtap_token") || "";

el("saveToken").onclick = () => {
  token = el("tokenInput").value;
  localStorage.setItem("medtap_token", token);
  alert("Token Saved");
};

async function api(path){
  const res = await fetch(apiBase + path, {
    headers: token ? { "Authorization": "Bearer " + token } : {}
  });
  return res.json().catch(()=>null);
}

el("searchBtn").onclick = async () => {
  const q = el("searchQuery").value;
  if(!q) return alert("Enter search query");

  const data = await api("/users?query=" + encodeURIComponent(q));
  renderPatients(data || []);
};

el("nfcSim").onclick = async () => {
  const tag = prompt("Enter NFC Tag ID:");
  if(!tag) return;

  const data = await api("/nfc/" + encodeURIComponent(tag));
  if(data) renderActive(data.patient || data);
};

function renderPatients(list){
  const box = el("results");
  box.innerHTML = "";
  list.forEach(p=>{
    const r = document.createElement("div");
    r.className = "row";
    r.innerHTML = `<div><strong>${p.name||"Unknown"}</strong><div class='small'>${p.phone||""}</div></div>
    <button class='btn'>Select</button>`;
    r.querySelector("button").onclick = () => renderActive(p);
    box.appendChild(r);
  });
}

function renderActive(p){
  el("activePatient").innerHTML = `
    <div><strong>${p.name}</strong></div>
    <div class="small">Phone: ${p.phone}</div>
    <div class="small">Email: ${p.email||""}</div>
  `;
}

// load latest records
api("/records").then(list=>{
  const box = el("records");
  if(!list) return;
  list.forEach(r=>{
    const row = document.createElement("div");
    row.className = "row";
    row.innerHTML = `<div><strong>${r.title||"Record"}</strong>
                     <div class="small">${new Date(r.createdAt).toLocaleString()}</div></div>`;
    box.appendChild(row);
  });
});
</script>
</body>
</html>
EOF
